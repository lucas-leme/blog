{"title":"Introdução a Macroeconomia","markdown":{"yaml":{"title":"Introdução a Macroeconomia","author":"Lucas Leme Santos","image":"https://www.ineteconomics.org/uploads/featured/iStock-1270042529.jpg","date":"2023-10-29","categories":["macro","pib"],"toc":true,"toc_sticky":true,"execute":{"echo":false,"freeze":false},"lang":"pt-BR"},"headingText":"hide all warnings","containsRefs":false,"markdown":"\n\nVisualização dos componentes do PIB sob as óticas de Oferta e Demanda.\n\n```{python}\nimport statsmodels.api as sm\nimport plotly.express as px\nimport plotly.graph_objects as go\nimport pandas as pd\nimport requests\nimport warnings\nimport sys\n\nsys.path.append('../')\n\nif True:\n    from _plots.figure import make_fig\n\nwarnings.filterwarnings('ignore')\n\n```\n\nA Macroeconomia é uma ciência que visa estudar o comportamento da economia como um todo. Para isso, ela busca explicar o comportamento de variáveis agregadas, tanto no curto quanto no longo prazo. Uma variável agregada é aquela que representa o comportamento de um conjunto de variáveis. Por exemplo, o PIB é uma variável agregada que representa o valor total de todos os bens e serviços produzidos em uma economia.\n\nNesta introdução, vamos nos concentrar na composição do PIB, com ênfase no Brasil. Ao entender os componentes do PIB, podemos obter insights sobre a saúde e o desempenho geral da economia. Para isso, vamos obter os dados do PIB e realizar o tratamento dos dados, que será o foco da primeira seção deste artigo.\n\nEm seguida, na segunda seção, vamos analisar o PIB sob as duas óticas: Oferta e Demanda. Este estudo nos permitirá entender melhor como diferentes fatores e políticas econômicas podem impactar o PIB.\n\nPor fim, na terceira seção, vamos concluir o artigo e listar as referências utilizadas. Esta seção servirá como um resumo dos pontos principais discutidos no artigo e fornecerá links para fontes adicionais de informação.\n\n## Tratamento dos Dados\n\nNesta seção, antes da análise dos dados, vamos realizar o tratamento dos dados.\n\n```{python}\n# | code-fold: true\n# | code-summary: \"Código da Aquisição dos dados\"\n# | echo: true\n# | label: code-get-data\n\n# Endpoint para consulta dos dados do PIB\nendpoint = \"https://servicodados.ibge.gov.br/api/v3/agregados/1620/periodos/199601%7C199602%7C199603%7C199604%7C199701%7C199702%7C199703%7C199704%7C199801%7C199802%7C199803%7C199804%7C199901%7C199902%7C199903%7C199904%7C200001%7C200002%7C200003%7C200004%7C200101%7C200102%7C200103%7C200104%7C200201%7C200202%7C200203%7C200204%7C200301%7C200302%7C200303%7C200304%7C200401%7C200402%7C200403%7C200404%7C200501%7C200502%7C200503%7C200504%7C200601%7C200602%7C200603%7C200604%7C200701%7C200702%7C200703%7C200704%7C200801%7C200802%7C200803%7C200804%7C200901%7C200902%7C200903%7C200904%7C201001%7C201002%7C201003%7C201004%7C201101%7C201102%7C201103%7C201104%7C201201%7C201202%7C201203%7C201204%7C201301%7C201302%7C201303%7C201304%7C201401%7C201402%7C201403%7C201404%7C201501%7C201502%7C201503%7C201504%7C201601%7C201602%7C201603%7C201604%7C201701%7C201702%7C201703%7C201704%7C201801%7C201802%7C201803%7C201804%7C201901%7C201902%7C201903%7C201904%7C202001%7C202002%7C202003%7C202004%7C202101%7C202102%7C202103%7C202104%7C202201%7C202202%7C202203%7C202204%7C202301%7C202302/variaveis/583?localidades=N1[all]&classificacao=11255[90687,90691,90696,90707,93404,93405,93406,93407,93408]\"\n\nr = requests.get(endpoint)\nraw_data = r.json()\n\n# Tratamento dos dados brutos para um formato tabular\ntable_data = []\nfor entry in raw_data:\n    for result in entry[\"resultados\"]:\n        for serie_i in result[\"series\"]:\n\n            for i, date_and_value in enumerate(serie_i[\"serie\"].items()):\n                date, value = date_and_value\n                formated_date = date[:4] + \"-\" + date[4:] + \"-01\"\n\n                assert len(result['classificacoes']) == 1, \\\n                    \"Mais de uma classificação, possível perda de dados\"\n\n                table_data.append({\n                    \"id\": result['classificacoes'][0]['id'],\n                    \"nome\": list(result['classificacoes'][0]['categoria'].values())[0],\n                    \"date\": formated_date,\n                    \"value\": value\n                })\n\n\n# Criação do DataFrame\ndf = pd.DataFrame(table_data)\n\ndatasets = {\n    nome: df[df[\"nome\"] == nome]\n    for nome in df[\"nome\"].unique()\n}\n\n# Mapeamento dos nomes\nnomes_mapper = {\n    'Agropecuária - total': 'Agropecuária',\n    'Indústria - total': 'Indústria',\n    'Serviços - total': 'Serviços',\n    'PIB a preços de mercado': 'PIB',\n    'Despesa de consumo das famílias': 'Consumo',\n    'Despesa de consumo da administração pública': 'Governo',\n    'Formação bruta de capital fixo': 'Investimento',\n    'Exportação de bens e serviços': 'Exportação',\n    'Importação de bens e serviços (-)': 'Importação'\n}\ndatasets = {\n    nomes_mapper[nome]: dataset\n    for nome, dataset in datasets.items()\n}\n\n# Conversão de dados númericos e datas\nfor nome, dataset in datasets.items():\n    # to numeric\n    dataset[\"value\"] = pd.to_numeric(dataset[\"value\"])\n    dataset.index = pd.to_datetime(dataset[\"date\"])\n    # Set PIB Freq\n    dataset = dataset.asfreq('Q')\n\npib = datasets['PIB']['value']\n\n# Seleção dos componentes da Oferta e Demanda\nproduct_components = [\n    \"Consumo\",\n    \"Investimento\",\n    \"Governo\",\n    \"Exportação\",\n    \"Importação\"\n]\n\nincome_components = [\n    \"Agropecuária\",\n    \"Indústria\",\n    \"Serviços\"\n]\n\n# Bases finais\nproduct_dataset = pd.DataFrame({\n    nome: dataset['value']\n    for nome, dataset in datasets.items()\n    if nome in product_components\n})\n\nincome_dataset = pd.DataFrame({\n    nome: dataset['value']\n    for nome, dataset in datasets.items()\n    if nome in income_components\n})\n\n```\n\nPara entender melhor a evolução do PIB ao longo do tempo, é importante considerar os dados dessazonalizados, ou seja, remover os efeitos recorrentes de cada período. Isso nos permite visualizar melhor a tendência dos dados.\n\nExistem duas principais formas que uma série temporal pode ser decomposta: Aditiva e Multiplicativa. Ambas são representadas pela equação @eq-decomposicao-sazonalidade. No nosso caso, vamos utilizar a decomposição aditiva para o PIB.\n\n$$\n    y_t = T_t + S_t + C_t + \\epsilon_t = T_t \\times S_t \\times C_t \\times \\epsilon_t\n$$ {#eq-decomposicao-sazonalidade}\n\nOnde: $y_t$ é o valor observado, $T_t$ é a tendência, $S_t$ é a sazonalidade, $C_t$ é o ciclo e $\\epsilon_t$ é o erro.\n\nPara obter os dados dessazonalizados, vamos utilizar a função `seasonal_decompose` da biblioteca [statsmodels](https://www.statsmodels.org/stable/index.html). Essa função retorna um objeto com os 4 componentes da decomposição. Para obter apenas a tendência, vamos utilizar o componente `trend`.\n\n```{python}\n# | code-summary: \"Função para desasonalizar os dados\"\n# | echo: true\n\n\ndef seasonal_decompose(dataset: pd.DataFrame, period: int = 4):\n    \"\"\"Dessazonaliza os dados\n\n    Args:\n        dataset (pd.DataFrame): DataFrame com os dados\n        period (int, optional): Periodo da sazonalidade. \n                                Padrao: 4, para o trimestre.\n\n    Returns:\n        pd.DataFrame: DataFrame com os dados desasonalizados\n    \"\"\"\n\n    return pd.DataFrame({\n        column: sm.tsa.seasonal_decompose(\n            dataset[column], model='additive', period=period).trend\n        for column in dataset.columns\n    })\n```\n\n```{python}\n# | code-fold: true\n# | code-summary: \"Cálculo dos dados dessazonalizados\"\n# | echo: true\n\n\nproduct_dataset_des = seasonal_decompose(\n    product_dataset, period=4\n)\n\nincome_dataset_des = seasonal_decompose(\n    income_dataset, period=4\n)\n\npib_des = seasonal_decompose(\n    pib.to_frame(), period=4\n).iloc[:, 0]\n\n```\n\nCom os dados dessazonalizados, podemos calcular a variação percentual de cada componente do PIB. Para isso, vamos utilizar a função `pct_change` da biblioteca [pandas](https://pandas.pydata.org/). Essa função retorna a variação percentual entre o valor atual e o valor anterior.\n\nE para calcular a variação cumulativa, vamos utilizar a função `cumprod` da biblioteca [pandas](https://pandas.pydata.org/). Essa função retorna a variação cumulativa entre o valor atual e o valor anterior. Assim, estudar a varição cumulativa de cada componente do PIB para entender melhor a evolução do PIB ao longo do tempo.\n\n\n```{python}\n# | code-fold: true\n# | code-summary: \"Cáculo da evolução cumulativa dos componentes do PIB\"\n# | echo: true\n\n\n# Variação cumulativa da Oferta\nproduct_dataset_cumulative = pd.DataFrame({\n    nome: (1 + product_dataset_des[nome].pct_change()).cumprod()\n    for nome in product_dataset_des.columns\n})\n\n\n# Transformação das Exportações e Importações em Exportações Líquidas\nproduct_dataset_cumulative['Exportação Líquida'] = (1 +\n                                                    product_dataset_cumulative['Exportação'].pct_change() - product_dataset_cumulative['Importação'].pct_change()).cumprod()\nproduct_dataset_cumulative = product_dataset_cumulative.drop(\n    ['Importação', 'Exportação'], axis=1)\n\n# Variação cumulativa da Renda\nincome_dataset_cumulative = pd.DataFrame({\n    nome: (1 + income_dataset_des[nome].pct_change()).cumprod()\n    for nome in income_dataset_des.columns\n})\n\n# Variação cumulativa do PIB\npib_cumulative = (1 + pib_des.pct_change()).cumprod()\n```\n\n\n## Como estimar o PIB?\n\nNesse estudo, vamos analisar o PIB sob as duas óticas: Oferta e Demanda. Para isso, utilizaremos os dados do Instituto Brasileiro de Geografia e Estatística (IBGE), que são disponibilizados por meio do banco de dados SIDRA [^1], que foram tratados na seção anterior.\n\n\n```{python}\n\n\ndef add_recessions_to_fig(fig, low, top):\n\n    high_shift = .23\n    low_shift = .4\n\n    annot_shift = .02\n\n    fig.add_shape(\n        # Vertical Line\n        type=\"line\",\n        x0=\"2008-01-01\",\n        y0=low,\n        x1=\"2008-01-01\",\n        y1=top-high_shift-annot_shift,\n        line=dict(\n            color=\"gray\",\n            width=1,\n            dash=\"dot\",\n        )\n    )\n\n    fig.add_shape(\n        # Vertical Line\n        type=\"line\",\n        x0=\"2015-01-01\",\n        y0=low,\n        x1=\"2015-01-01\",\n        y1=top-low_shift-annot_shift,\n        line=dict(\n            color=\"gray\",\n            width=1,\n            dash=\"dot\",\n        )\n    )\n\n    fig.add_shape(\n        # Vertical Line\n        type=\"line\",\n        x0=\"2020-01-01\",\n        y0=low,\n        x1=\"2020-01-01\",\n        y1=top-high_shift-annot_shift,\n        line=dict(\n            color=\"gray\",\n            width=1,\n            dash=\"dot\",\n        )\n    )\n\n    fig.add_annotation(\n        x=\"2008-01-01\",\n        y=top-high_shift,\n        text=\"Crise Financeira\",\n        showarrow=False,\n        yshift=10\n    )\n\n    fig.add_annotation(\n        x=\"2015-01-01\",\n        y=top-low_shift,\n        text=\"Crise Governo<br>Dilma\",\n        showarrow=False,\n        yshift=10\n    )\n\n    fig.add_annotation(\n        x=\"2020-01-01\",\n        y=top-high_shift,\n        text=\"Crise Covid-19\",\n        showarrow=False,\n        yshift=10\n    )\n\n    return fig\n\n\n```\n\n### Oferta\n\nPela ótica da oferta podemos expressar o PIB com base em quatro componentes: Consumo, Investimento, Gastos do Governo e Exportações Líquidas. A ideia por trás dessa abordagem é que o PIB é a soma de todos os bens e serviços produzidos em uma economia. E para produzir esses bens e serviços, é necessário consumir, investir, gastar e exportar --- todos termos ligados à oferta. \n\nNa equação @eq-producao_agregada, temos a representação matemática dessa abordagem.\n\n$$\n    PIB = C + I + G + (X - M)\n$$ {#eq-producao_agregada}\n\nOnde: $C$ é o consumo, $I$ é o investimento, $G$ são os gastos do governo e $X - M$ é a diferença entre exportações e importações, que vamos chamar de exportações líquidas.\n\nAnalisando o historico dessazonalizado dos componentes do PIB na @fig-oferta, podemos observar que Investimentos e Exportações Líquidas foram os itens mais voláteis desde os anos 2000, principalmente em momentos de crise. Por outro lado, o consumo e os gastos do governo são mais estáveis.\n\n```{python, eval=TRUE}\n# | label: fig-oferta\n# | fig-cap: Evolução dos componentes de produção do PIB desde 1996\nlow = -0.3\ntop = 1.5\n\nfig = make_fig()\n\nfor nome in product_dataset_cumulative.columns:\n    fig.add_trace(go.Scatter(\n        x=product_dataset_cumulative.index,\n        y=product_dataset_cumulative[nome]-1,\n        name=nome,\n        mode='lines',\n        line=dict(width=2.5),\n    ))\n\nfig.add_trace(go.Scatter(\n    x=pib_cumulative.index,\n    y=pib_cumulative-1,\n    name='PIB',\n    mode='lines',\n    line=dict(width=6),\n    # set color\n    marker_color='black'\n))\n\nfig.update_layout(\n    title='A influência das commodities na produção brasileira<br><b>Exportações e Investimentos como motores mais relevantes<br>nos últimos anos.<br><sup>Evolução dos componentes de produção do PIB desde 1996</sup>')\n\nfig.update_yaxes(tickformat=\".0%\", title='Variação acumulada',\n                 range=[low, top], nticks=4)\n\n# Add 2008, 2015 and 2020 recessions\n\nfig = add_recessions_to_fig(fig, low, top)\n\nfig.show()\n```\n\n\nO início da série se dá em 1996, logo após a instauração do Plano Real, que foi pautado por um tripé macroeconômico: câmbio flutuante, metas de inflação e responsabilidade fiscal. Essas políticas foram fundamentais para a estabilização da economia brasileira, e para o crescimento econômico que se seguiu. E logo após a sua impletação podemos observar um crescimento significativo das Exportações Líquidas, que foi impulsionado pela força do Real, incentivando as exportações.\n\nDurante o 1º mandato do Lula, o Brasil passou por um período de forte crescimento econômico. Esse crescimento foi impulsionado por um aumento significativo dos preços das commodities [^2], que por sua vez, impulsionou o indicador de Exportações Líquidas.\n\nO início da série se dá em 1996, logo após a instauração do Plano Real, que foi pautado por um tripé macroeconômico: câmbio flutuante, metas de inflação e responsabilidade fiscal. Essas políticas foram fundamentais para a estabilização da economia brasileira, e para o crescimento econômico que se seguiu. E logo após a sua implementação, podemos observar um crescimento significativo das Exportações Líquidas, que foi impulsionado pela força do Real, incentivando as exportações.\n\nEste cenário de crescimento e estabilidade se estendeu até a eleição do presidente Lula, em 2002. Visto que o câmbio era flutuante, o Real se desvalorizou, após a eleição do presidente Lula, pois a percepção de risco aumentou. Na época o Dólar chegou a bater R$ 3,98, que foi o maior valor nominal por muitos anos. \n\nJá com o Presidente Lula no Governo, o Brasil passou por um período de forte crescimento econômico. Este crescimento foi impulsionado por um aumento significativo dos preços das commodities [^2], que por sua vez, impulsionou --- novamente --- o indicador de Exportações Líquidas. Portanto, podemos ver que as políticas econômicas implementadas durante o Plano Real e o aumento dos preços das commodities durante o primeiro mandato do presidente Lula tiveram um impacto significativo no crescimento econômico do Brasil.\n\nEm 2008, o Brasil foi atingido pela crise financeira global. No período pré-crise, podemos observar dois aspectos: uma queda significativa nas Exportações Líquidas após o *boom das commodities* e um aumento nos Investimentos. No auge da crise, o Banco Central realizou a manutenção da taxa de juros, indo na direção contrária dos incentivos de crédito, fiscais e de intervenções realizados pelo governo [^3]. Matendo uma postura mais *hawkish*, o Banco Central conseguiu evitar uma deterioração mais drástica das expectativas dos agentes do mercado, e nos anos seguintes as taxas de juros foram reduzidas, o que contribuiu para o aumento dos Investimentos.\n\nJá na crise de 2015, o Brasil passou por um período de forte recessão. Nesse período, podemos observar uma queda significativa nos Investimentos e um aumento repentino nas Exportações Líquidas. Essa queda nos Investimentos foi causada pela incerteza política e econômica, que afetou negativamente as expectativas dos agentes. Já o aumento nas Exportações Líquidas foi causado pela forte valorização do Real, que aumentou os incentivos para exportar e reduziu os incentivos para importar.\n\n### Renda\n\nPela ótica da renda, podemos expressar o PIB com base em três componentes: Agropecuária, Indústria e Serviços. A ideia por trás dessa abordagem é que o PIB é a soma de todos os rendimentos gerados na economia. E para gerar esses rendimentos, é necessário produzir bens e serviços --- todos termos ligados à renda.\n\nNa equação @eq-renda_agregada, temos a representação matemática dessa abordagem.\n\n$$\n    PIB = A + I + S\n$$ {#eq-renda_agregada}\n\nOnde: $A$ é a agropecuária, $I$ é a indústria e $S$ são os serviços.\n\nAnalisando o histórico desde os anos 2000, podemos observar grandes tendências na @fig-renda. A principal é o crescimento da Agropecuária, em detrimento da Indústria. A tendência inversa de tais fatores é um reflexo da economia brasileira, que no geral exporta matéria prima e importa produtos industrializados, e recentemente, o que reforça isso é a baixa exportação líquida e baixa renda da indústria. Olhando para os Serviços, podemos observar um ameno crescimento ao longo dos anos.\n\nDiferente da ótica da oferta, a ótica da renda não é tão volátil. Então mesmo durante as crises, podemos observar uma estabilidade de longo prazo nos componentes da renda.\n\n```{python}\n# | label: fig-renda\n# | fig-cap: Evolução dos componentes de renda do PIB desde 1996\n\n# PIB sob a ótica da renda\n\nlow = -0.3\ntop = 1.5\n\nfig = make_fig()\n\nfor nome in income_dataset_cumulative.columns:\n    fig.add_trace(go.Scatter(\n        x=income_dataset_cumulative.index,\n        y=income_dataset_cumulative[nome]-1,\n        name=nome,\n        mode='lines',\n        line=dict(width=2.5),\n    ))\n\nfig.add_trace(go.Scatter(\n    x=pib_cumulative.index,\n    y=pib_cumulative-1,\n    name='PIB',\n    mode='lines',\n    line=dict(width=6),\n    # set color\n    marker_color='black'\n))\n\nfig.update_layout(\n    title='Brasil: O País do Agro; Incapacidade de Evolução Industría;<br> e Serviços em leve Expansão.<br><sup>Evolução dos componentes de renda do PIB desde 1996</sup>')\n\nfig.update_yaxes(tickformat=\".0%\", title='Variação acumulada',\n                 range=[low, top], nticks=4)\n\n# Add 2008, 2015 and 2020 recessions\n\nfig = add_recessions_to_fig(fig, low, top)\n\nfig.show()\n```\n\nNa crise de 2015, podemos observar uma queda nos 3 componentes da renda. Essa queda foi causada pela forte recessão, que mesmo com a alta das exportações líquidas (@fig-oferta), não foi suficiente para compensar a queda do consumo, investimento e gastos do governo, resultando uma maior queda na renda nos 3 componentes.\n\n## Conclusão\n\nNesta introdução, vimos como o PIB pode ser estimado sob duas óticas: Oferta e Demanda. A ótica da oferta é mais volátil, e nos permite observar grandes variacões em períodos de crise. Já a ótica da renda é mais estável, e nos permite observar grandes tendências de longo prazo.\n\n# Referências\t\n\n-  Introduction to Macroeconomics, Intermediate Macroeconomics: [Lecture 1](https://fgeerolf.com/econ102/intro-macro.html)\n\n- Análise Qualitativa dos Dados do PIB: [Rpubs](https://rpubs.com/julio_costa/PIB_SIDRA)\n\n\n[^1]: O SIDRA é um sistema que permite a consulta de dados e indicadores do IBGE. Para acessar os dados do PIB, basta acessar o link [https://sidra.ibge.gov.br/tabela/1620](https://sidra.ibge.gov.br/tabela/1620).\n\n[^2]: O crescimento ocorreu em grande parte devido à crescente demanda das economias emergentes, principalmente da China: [https://pt.wikipedia.org/wiki/Boom_das_commodities_na_d%C3%A9cada_de_2000](https://pt.wikipedia.org/wiki/Boom_das_commodities_na_d%C3%A9cada_de_2000)\n\n[^3]: Crise e perspectivas para a economia brasileira - [DOI: 10.1590/s0103-40142017.31890013](https://www.scielo.br/j/ea/a/jNpn6wfChvNj659nr4LLtGD/)"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"vs","toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"pt-BR","fig-responsive":true,"quarto-version":"1.2.335","theme":{"light":["litera","../../styles/leme.scss"],"dark":["cyborg","../../styles/leme.scss"]},"page-layout":"full","code-block-border-left":"$blue","title-block-banner":true,"title":"Introdução a Macroeconomia","author":"Lucas Leme Santos","image":"https://www.ineteconomics.org/uploads/featured/iStock-1270042529.jpg","date":"2023-10-29","categories":["macro","pib"],"toc_sticky":true},"extensions":{"book":{"multiFile":true}}}}}